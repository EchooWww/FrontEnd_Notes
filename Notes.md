# JavaScript

## 0. Basics

### 0.1 Variable declaration

- variables has their scopes: if you declare a variable with a function, it’s local to the function; if you declare it within a loop/ if-else statement, it’s local to the block, but using `var` would break the scope
- So we’d better use `let` or `const`

### 0.2 `this` keyword

- refer to an object when the function is called, when called from the global scope, it refers to the window object of the browser
- If the function is attached to an objet, and called by that object, `this` would be referring the object

### 0.3 Pass-by-value and pass-by-reference

- If the argument is an object, it’s stored in the heap and passed by reference

### 0.4 Object

- Object literal syntax with curly braces {}
- Constructor with new keyword

### 0.5 Data Structures

- array: indexed values []
- set: unique values []
- map: key-value pairs like object, but easier to be looped over

```jsx
const dict = new Map([
  [key1, value1],
  [key2, values],
]);
```

### 0.6 Event loop

- Enables async code runs in a separate thread pool
- `setTimeOut`: 1st argument is the function(callback enqueue in the event loop, will be called back when it’s ready to execute in main stack), 2nd argument is the delay in ms
- `async` and `await`: need to wrap code in to `try-catch` block to handle errors

### 0.7 Export

### 0.8 Arrays

- push: attach the element to the end

```jsx
const friends = ["Micheal", "Steven", "Peter"];
const newLength = friends.push("Echo"); // the push function, attach the element to the end
//push also return the new length of the array
console.log(friends); // ["Micheal", "Steven", "Peter", "Echo"]
```

- unshift: attach the element to the beginning
- pop(): remove the last element, and return the removed element

```jsx
const popped friends.pop();
console.log(popped); // "Echo"
```

- shift(): remove the first element of the array

```jsx
friends.shift();
console.log(friends); // ["Steven", "Peter"]
```

- indexOf(element): return the index of the element

```jsx
console.log(friends.indexOf("Steven")); // 0
console.log(friends.indexOf("Bob")); // -1
```

- includes(): return a boolean whether the array includes the element

### 0.9 Objects

In arrays, we cannot give the values a name, so we use object to define key-value pairs:

```jsx
// in objects, the order of key-value pairs don't matter at all
// we retrive the data based on the name (the 'key')
// object literal syntax
const echo = {
  firstName: "Echo",
  lastName: "Wang",
  age: 2037 - 1996,
  job: "student",
};
```

> **\*\*\*\***\*\*\*\***\*\*\*\***\*\*\*\***\*\*\*\***\*\*\*\***\*\*\*\***Dot / Bracket notation**\*\*\*\***\*\*\*\***\*\*\*\***\*\*\*\***\*\*\*\***\*\*\*\***\*\*\*\***

```jsx
console.log(echo.lastName); //the dot operator, need to specify the realnem
console.log(echo["lastName"]); // in the bracket notation, we can put any expression within the bracket
const nameKey = "Name";
console.log(echo["first" + nameKey]); // we can compute the name in the bracket

const interested = prompt("What do you want to know about Echo?");
console.log(echo[interested]);
```

> \***\*\*\*\*\***Add properties\***\*\*\*\*\***

```jsx
echo.location = 'Canada'
echo['instagram'] = 'Echowww';
console.log(echo);
console.log(`echo has ${echo.friends.length} friends, and her best friend is called ${echo.friends[0]};
```

> **Object Methods**

we can add functions to object as the ‘value’, aka ‘property’

```jsx
const echo = {
 calcAge: function() {
		this.age =  2037 - this.birthYear; // reference the object itself with `this` keyword
		return this.age;
	}
}
// pay attention: we can only have the function expression instead of the declaration here
// it's equal to `age = function(birthYear){return 2037 - birthYear}`
const age = echo.age;

getSummary : function(){
return (`${this.firstName} is a ${this.calcAge()} -year old ${this.job}, and she has ${this.driverLicense ? 'a': 'no'} driver liscense`)
```

### 0.10 Loops

- continue: exit this iteration and start the next immediately
- break: break the whole loop

```jsx
// this will only print strings
for (let i = 0; i < echo.length; i++) {
		if (typeof(echo[i])!=='string) continue;
		console.log(echo[i], typeof(echo[i]));
}
```

## 1. First project

### 1.1 DOM : document object model

> **What is DOM?**

- A structured representation of HTML documents, allows JavaScript to access HTML elements and styles to manipulate them
- Automatically generated by the browser when a web page loads, it's a tree structure
- In the tree, each node is an object representing a part of the document

  - document: the entry point into the DOM. e.g. `document.querySelector()` it refers to the whole HTML element
  -

> **Methods to select elements**

- `querySelector()`: select the first element that matches the selector
- `querySelectorAll()`: select all the elements that matches the selector
- `textContent`: get the text content of the element
- `innerHTML`: get the HTML content of the element

**DOM is not part of JavaScript, it's part of the web API**

- It's not in the JavaScript language, but it's a part of the browser, which is also written in JavaScript, and we can use it without importing anything

> **Handling events: event listener**

- First, we need to specify where the event happens with DOM selectors, and then we need to listen to the event
- `addEventListener()`: add an event listener to the element, the first argument is the event type, the second argument is the function to be called when the event happens
- the function passed as the 2nd parameter would be called by the event listener function, so we don't need to call it ourselves
- When we pass a function as the second argument, it's called a callback function, so we **don't include the parentheses**, otherwise it would be called immediately

```js
document.querySelector(".check").addEventListener("click", () => {
  console.log("document.querySelector('.guess').value");
});
```

> Modyfing CSS styles with DOM manipulation

- `style`: the style property of the element, it's an object that contains all the CSS styles
- when we want to change the style of an element, we need to specify the property name in camelCase (instead of dash), e.g. `backgroundColor`

> Modifying CSS styles by adding/removing classes from classes list

- `classList`: the classList property of the element, it's an object that contains all the classes of the element
- Instead of changing the style directly, we can add/remove classes from the classList, and then define the style in the CSS file to aggregate the styles

> Handle key press events

- keyboard events are global events, so we don't need to select the element first, we can just use `addEventListener()` on the `document` object
- keyup: when the key is released; keydown: when the key is pressed; keypress: when the key is pressed and held. We usually use keydown
- which key is pressed? we can access the information by the `event` object, which is passed as the first argument of the callback function. `event.key` is the property that we need
